// Use ServerEvents.loaded which fires once when the server starts
ServerEvents.loaded(event => {
    console.log("======= BIOME REGISTRY DUMP =======");
    
    try {
        // Keep only the command implementation as it works better
        const BIOME = Platform.getRegistryKey('biome');
        const registry = event.server.registryAccess().registryOrThrow(BIOME);
        
        // Print all biome IDs in a sorted list
        const biomeList = [];
        
        // Use a different approach for iterating
        registry.keySet().iterator().forEachRemaining(id => {
            biomeList.push(id.toString());
        });
        
        biomeList.sort().forEach(biome => {
            console.log(biome);
        });
        
        console.log(`Total biomes found: ${biomeList.length}`);
    } catch (e) {
        console.log("Error while dumping biomes: " + e);
    }
    
    console.log("====================================");
});